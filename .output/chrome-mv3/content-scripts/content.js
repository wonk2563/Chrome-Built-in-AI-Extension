var content=function(){"use strict";var _=Object.defineProperty;var C=(a,s,l)=>s in a?_(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l;var c=(a,s,l)=>C(a,typeof s!="symbol"?s+"":s,l);var w,g;function a(t){return t}async function s(t,e){const n=["article","main",".content",".post-content",".article-content","#content",".entry-content",'[role="main"]'],r=t.querySelector(n.join(", "));if(r){const i=l(r);e({success:!0,data:i,error:null});return}const o=Array.from(t.querySelectorAll("p, h1, h2, h3, h4, h5, h6")).map(i=>{var d;return(d=i.textContent)==null?void 0:d.trim()}).filter(i=>i?i.length>50&&!i.match(/cookie|privacy policy|terms of use/i):!1).slice(0,10);e({success:!0,data:o.join(`

`),error:null})}function l(t){var r;const e=["script","style","nav","header","footer",".advertisement",".social-share",".comments"],n=t.cloneNode(!0);return e.forEach(o=>{n.querySelectorAll(o).forEach(i=>i.remove())}),((r=n.textContent)==null?void 0:r.trim())||""}const I={matches:["<all_urls>"],main(){chrome.runtime.onMessage.addListener(async(t,e,n)=>{if(t.action==="extractPageContent"){let r=document;return t!=null&&t.html&&(r=new DOMParser().parseFromString(t.html,"text/html")),await s(r,n),!0}})}},h=((g=(w=globalThis.browser)==null?void 0:w.runtime)==null?void 0:g.id)==null?globalThis.chrome:globalThis.browser;function f(t,...e){}const b={debug:(...t)=>f(console.debug,...t),log:(...t)=>f(console.log,...t),warn:(...t)=>f(console.warn,...t),error:(...t)=>f(console.error,...t)},T={BASE_URL:"/",BROWSER:"chrome",CHROME:!0,COMMAND:"build",DEV:!1,EDGE:!1,ENTRYPOINT:"content",FIREFOX:!1,MANIFEST_VERSION:3,MODE:"production",OPERA:!1,PROD:!0,SAFARI:!1,SSR:!1,VITE_CJS_IGNORE_WARNING:"true"},E=class E extends Event{constructor(e,n){super(E.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=n}};c(E,"EVENT_NAME",v("wxt:locationchange"));let p=E;function v(t){var n;const e=typeof T>"u"?"build":"content";return`${(n=h==null?void 0:h.runtime)==null?void 0:n.id}:${e}:${t}`}function N(t){let e,n;return{run(){e==null&&(n=new URL(location.href),e=t.setInterval(()=>{let r=new URL(location.href);r.href!==n.href&&(window.dispatchEvent(new p(r,n)),n=r)},1e3))}}}const u=class u{constructor(e,n){c(this,"isTopFrame",window.self===window.top);c(this,"abortController");c(this,"locationWatcher",N(this));this.contentScriptName=e,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return h.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,n){const r=setInterval(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(e,n){const r=setTimeout(()=>{this.isValid&&e()},n);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(e){const n=requestAnimationFrame((...r)=>{this.isValid&&e(...r)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(e,n){const r=requestIdleCallback((...o)=>{this.signal.aborted||e(...o)},n);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(e,n,r,o){var i;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(i=e.addEventListener)==null||i.call(e,n.startsWith("wxt:")?v(n):n,r,{...o,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),b.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:u.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")}listenForNewerScripts(e){let n=!0;const r=o=>{var i,d;if(((i=o.data)==null?void 0:i.type)===u.SCRIPT_STARTED_MESSAGE_TYPE&&((d=o.data)==null?void 0:d.contentScriptName)===this.contentScriptName){const R=n;if(n=!1,R&&(e!=null&&e.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};c(u,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started");let S=u;function F(){}function m(t,...e){}const A={debug:(...t)=>m(console.debug,...t),log:(...t)=>m(console.log,...t),warn:(...t)=>m(console.warn,...t),error:(...t)=>m(console.error,...t)};return(async()=>{try{const{main:t,...e}=I,n=new S("content",e);return await t(n)}catch(t){throw A.error('The content script "content" crashed on startup!',t),t}})()}();
content;
